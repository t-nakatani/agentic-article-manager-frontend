# アーキテクチャ調査レポート

## 現状の問題点

### 1. 状態管理の分散

- 複数の状態管理手法（Context API、ローカルステート、Redux）が混在している
- `useReduxAuth`と従来の認証管理が並行して存在している
- 状態の依存関係が不明確で追跡が困難

### 2. ディレクトリ構造の不整合

- `docs`ディレクトリに設計ドキュメントが散在しているが、実装との一貫性が不明確
- コンポーネント間の責任分担が曖昧
- 関連するコードが異なるディレクトリに分散している

### 3. 国際化対応の不完全さ

- 一部のUIテキストが日本語ハードコーディングされている（例：Header.tsxの「拡張機能」「ヘルプ」など）
- 他の部分は英語のままで、言語の一貫性がない

### 4. Reduxへの移行が中途半端

- Redux移行戦略ドキュメントは存在するが、実装が部分的
- 古いコンテキストベースのコードと新しいReduxベースのコードが混在
- `useReduxArticles`などの新しいフックが導入されているが、従来のフックも残っている

### 5. コードの重複

- 類似した機能を持つコンポーネントやフックが複数存在
- 特にArticleListコンポーネントには重複したロジックが見られる

### 6. テスト不足

- テストに関する言及がドキュメントにあるが、実装の形跡が見られない
- 特にReduxへの移行中のような大規模な変更には十分なテストが必要

### 7. エラー処理の不統一

- 一部のコンポーネントでは詳細なエラー処理が実装されているが、他では最小限
- エラーメッセージの表示方法が統一されていない

### 8. モックデータへの依存

- 実際のAPIが実装されるまでモックデータを使用しているが、移行計画が不明確
- モックデータとAPIの境界が曖昧

## 改善提案

### 1. 状態管理の一元化

- Reduxへの移行を完了させ、Context APIからの段階的な移行を促進
- 明確な状態管理の責任分担を確立
- グローバル状態とローカル状態の使い分けガイドラインを作成

### 2. ディレクトリ構造の整理

- 機能ごとのモジュール分割を強化
- 関連するコンポーネント、フック、ユーティリティを同じディレクトリにまとめる
- ディレクトリ構造のドキュメントを更新し、実装と一致させる

### 3. 国際化フレームワークの導入

- i18nライブラリを導入し、すべてのハードコードされたテキストを置き換え
- 言語ファイルを整理し、一貫した多言語サポートを実現

### 4. Reduxへの移行完了

- 移行戦略ドキュメントに従って残りの機能をReduxに移行
- 古いコンテキストベースのコードを段階的に削除
- 移行の各段階でテストを実施

### 5. コードの重複排除

- 共通のユーティリティ関数やカスタムフックを作成
- コンポーネントの責任を明確にし、再利用可能なコンポーネントを設計

### 6. テスト戦略の確立

- ユニットテスト、統合テスト、E2Eテストの導入
- CI/CDパイプラインにテストを組み込む
- テストカバレッジ目標を設定

### 7. エラー処理の標準化

- グローバルなエラーハンドリング戦略を確立
- エラーバウンダリの導入
- ユーザーフレンドリーなエラーメッセージの標準化

### 8. APIとモックデータの分離

- APIクライアントレイヤーを明確に定義
- モックデータからリアルAPIへの移行計画を策定
- 環境変数を使用して開発/本番環境での動作を制御 